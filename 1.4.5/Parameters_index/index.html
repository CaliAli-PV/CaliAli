
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.biorxiv.org/content/10.1101/2023.05.19.540935v1/1.4.5/Parameters_index/">
      
      
        <link rel="prev" href="../License/">
      
      
        <link rel="next" href="../function_index/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.25">
    
    
      
        <title>CaliAli Parameters Overview - CaliAli</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../overrides/main.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#caliali-parameters-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../.."> 
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CaliAli" class="md-header__button md-logo" aria-label="CaliAli" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CaliAli
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CaliAli Parameters Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CaliAli" class="md-nav__button md-logo" aria-label="CaliAli" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CaliAli
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation and System Requirements
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting CaliAli Parameters
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Downsampling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Downsampling
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Motion_correction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motion Correction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../alignment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inter-session Alignment
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../extraction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Calcium Signal extraction with CaliAli
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Low_memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Low-Memory Processing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Version_History/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Whats new?
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../License/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage Agreement
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    CaliAli Parameters Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    CaliAli Parameters Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parameter-table" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ“Œ Parameter Table
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ“Œ Parameter Table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ General Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downsampling-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ Downsampling Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preprocessing-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ Preprocessing Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motion-correction-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ Motion Correction Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inter-session-alignment-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ Inter-Session Alignment Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cnmf-e-parameters-overview" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ“Œ CNMF-E Parameters Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ“Œ CNMF-E Parameters Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-and-patch-processing-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ Memory and Patch Processing Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ Initialization Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spatial-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ Spatial Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temporal-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ Temporal Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merging-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ðŸ”¹ Merging Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../function_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    List of Relevant functions
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="caliali-parameters-overview">CaliAli Parameters Overview</h1>
<p>This table lists all <strong>CaliAli parameters</strong>, their <strong>default values</strong>, a brief <strong>description</strong>, and guidance on how to choose them.</p>
<hr />
<h2 id="parameter-table"><strong>ðŸ“Œ Parameter Table</strong></h2>
<h3 id="general-parameters"><strong>ðŸ”¹ General Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gSig</code></td>
<td><code>[] (auto)</code></td>
<td>Neuron filter size in pixels</td>
<td>Defaults to <code>5 / spatial_ds</code>. Override when your data are anisotropic or when neuron diameters differ significantly from 5â€¯px. Use <a href="../Functions_doc/NeuronSize_app/">NeuronSize_app</a> for fine tuning.</td>
</tr>
<tr>
<td><code>sf</code></td>
<td><code>10</code></td>
<td>Frame rate (fps)</td>
<td>Set to match the acquisition frame rate.</td>
</tr>
<tr>
<td><code>input_files</code></td>
<td><code>[]</code></td>
<td>Paths to input video files</td>
<td>Leave empty to manually select files.</td>
</tr>
<tr>
<td><code>output_files</code></td>
<td><code>[]</code></td>
<td>Paths to output video files</td>
<td>Leave empty for default naming (recommended).</td>
</tr>
<tr>
<td><code>batch_sz</code></td>
<td><code>'auto'</code> (demo) / <code>0</code></td>
<td><strong>Automatic chunking for large sessions</strong> (frames per chunk, 0 = disable)</td>
<td>Auto-estimates chunk size from available RAM; set a numeric value or <code>0</code> to override. <span class="twemoji" title="See the Low_memory guide for recommended overrides when the heuristic over- or under-allocates."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="downsampling-parameters"><strong>ðŸ”¹ Downsampling Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BVsize</code></td>
<td><code>[]</code></td>
<td>Size of blood vessels in pixels [min, max]</td>
<td>Leave empty to automatically calculate based on gSig or use <a href="../Functions_doc/BV_app/">BV_app</a> (recommended).</td>
</tr>
<tr>
<td><code>spatial_ds</code></td>
<td><code>1</code></td>
<td>Spatial downsampling factor</td>
<td>Increase for faster processing, decrease for higher resolution.</td>
</tr>
<tr>
<td><code>temporal_ds</code></td>
<td><code>1</code></td>
<td>Temporal downsampling factor</td>
<td>Increase only if memory constraints prevent full processing.</td>
</tr>
<tr>
<td><code>file_extension</code></td>
<td><code>'avi'</code></td>
<td>File extension for processed videos organized in folders</td>
<td>Used when sessions are split into multiple files. <span class="twemoji" title="For example, data acquired with the UCLA Miniscope is often divided into multiple .avi videos. Instead of selecting individual .avi files, you can choose the entire folder so CaliAli finds matching files, treats them as one session, and concatenates them into a single .mat file."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span></td>
</tr>
<tr>
<td><code>force_non_negative</code></td>
<td><code>1</code></td>
<td>Enforce non-negative pixels during preprocessing</td>
<td>When enabled, values are lifted and clipped within <code>CaliAli_remove_background</code> after noise scaling.</td>
</tr>
<tr>
<td><code>force_non_negative_tolerance</code></td>
<td><code>13</code></td>
<td>Non-negative tolerance threshold</td>
<td>Gap added before clipping; increase only if you observe residual bias in dark regions.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="preprocessing-parameters"><strong>ðŸ”¹ Preprocessing Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>neuron_enhance</code></td>
<td><code>true</code></td>
<td>Use MIN1PIE background subtraction</td>
<td>Keep enabled unless signal loss is observed during preprocessing.</td>
</tr>
<tr>
<td><code>noise_scale</code></td>
<td><code>true</code></td>
<td>Enable noise scaling per pixel</td>
<td>Keep enabled unless signal loss is observed during preprocessing.</td>
</tr>
<tr>
<td><code>detrend</code></td>
<td><code>1</code></td>
<td>Detrending window (seconds), 0 = no detrending</td>
<td>Set to the duration of calcium transients in seconds.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="motion-correction-parameters"><strong>ðŸ”¹ Motion Correction Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reference_projection_rigid</code></td>
<td><code>'BV'</code></td>
<td>Reference projection for rigid correction</td>
<td>Choose <code>neuron</code> if blood vessels are not suitable.</td>
</tr>
<tr>
<td><code>do_non_rigid</code></td>
<td><code>false</code></td>
<td>Perform non-rigid motion correction</td>
<td>Enable only after confirming rigid correction was insufficient. <span class="twemoji" title="The current non-rigid module is experimental and may introduce field-of-view artifacts; an updated implementation is planned."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span></td>
</tr>
<tr>
<td><code>non_rigid_pyramid</code></td>
<td><code>{'BV','neuron','neuron'}</code></td>
<td>Multi-level registration pyramid for non-rigid correction</td>
<td>Use default unless BV is unavailable.</td>
</tr>
<tr>
<td><code>non_rigid_batch_size</code></td>
<td><code>[20,60]</code></td>
<td>Batch size range for non-rigid correction, CaliAli will optimize within this range.</td>
<td>Set as <code>[2 x sf, 6 x sf]</code>.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="inter-session-alignment-parameters"><strong>ðŸ”¹ Inter-Session Alignment Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>do_alignment_translation</code></td>
<td><code>true</code></td>
<td>Perform inter-session translation</td>
<td>Always true unless sessions were pre-aligned. If do_alignment_non_rigid is also false, videos will be concatenated without registration.</td>
</tr>
<tr>
<td><code>do_alignment_non_rigid</code></td>
<td><code>true</code></td>
<td>Perform inter-session alignment</td>
<td>Always true unless sessions were pre-aligned or non-rigid alignment is not necessary. If do_alignment_translation is also false, videos will be concatenated without registration.</td>
</tr>
<tr>
<td><code>projections</code></td>
<td><code>'BV+neuron'</code></td>
<td>Projection method used for alignment</td>
<td>By default use both blood vessels and neurons. <span class="twemoji" title="CaliAli automatically falls back to neuron-only registration if vessels are unreliable; set Force_BV = true to enforce blood-vessel alignment."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span></td>
</tr>
<tr>
<td><code>final_neurons</code></td>
<td><code>false</code></td>
<td>Use an additional alignment iteration based on neurons</td>
<td>Enable if session registration was inaccurate. Often not necessary</td>
</tr>
<tr>
<td><code>Force_BV</code></td>
<td><code>0</code></td>
<td>Force BV alignment even if stability score is low</td>
<td>Sometimes BV stability score may be low as results of a debris in the FOV. Setting this parameter to true would ensure that BV are used for registration</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="cnmf-e-parameters-overview"><strong>ðŸ“Œ CNMF-E Parameters Overview</strong></h2>
<h3 id="memory-and-patch-processing-parameters"><strong>ðŸ”¹ Memory and Patch Processing Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>memory_size_to_use</code></td>
<td><code>total_system_memory_GB</code> (auto)</td>
<td>Total available memory for computation</td>
<td>Override when you want MATLAB to use less than the detected RAM.</td>
</tr>
<tr>
<td><code>memory_size_per_patch</code></td>
<td><code>total_system_memory_GB</code> (auto)</td>
<td>Memory allocated per patch</td>
<td>Defaults to the detected RAM so patching adapts to your hardware; reduce if you need smaller tiles.</td>
</tr>
<tr>
<td><code>patch_dims</code></td>
<td><code>[64, 64]</code></td>
<td>Dimensions of patches</td>
<td>Larger patches improve accuracy but increase computation time and memory consumption. <span class="twemoji" title="Using more or larger patches also increases memory usage, so scale cautiously."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span></td>
</tr>
<tr>
<td><code>w_overlap</code></td>
<td><code>32</code></td>
<td>Patch overlap width</td>
<td>Increase if you detect edge artifacts.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="initialization-parameters"><strong>ðŸ”¹ Initialization Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>min_corr</code></td>
<td><code>0.1</code></td>
<td>Minimum correlation for neuron seeding</td>
<td>Usually controlled via <code>CaliAli_set_initialization_parameters(CaliAli_options)</code>. <span class="twemoji" title="Raise the threshold to suppress non-neuronal detections; lower it to recover dim neurons when configuring manually. Use Check_initialization_parameters(CaliAli_options) to preview how many seeds pass."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span></td>
</tr>
<tr>
<td><code>min_pnr</code></td>
<td><code>6</code></td>
<td>Minimum peak-to-noise ratio for seeding</td>
<td>Same as <code>min_corr</code>.</td>
</tr>
<tr>
<td><code>min_pixel</code></td>
<td><code>[]</code></td>
<td>Minimum pixel area for neurons</td>
<td>Automatically calculated based on gSig.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="spatial-parameters"><strong>ðŸ”¹ Spatial Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>with_dendrites</code></td>
<td><code>true</code></td>
<td>Do not assume that signals are circular during extraction</td>
<td>Keep enabled for better CNMF convergence and accurate dendrite detection. <span class="twemoji" title="Disabling applies a circular kernel that can mislabel dendrites as somas."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span></td>
</tr>
<tr>
<td><code>spatial_constraints</code></td>
<td><code>{'connected': False, 'circular': False}</code></td>
<td>Constraints for spatial filtering</td>
<td>Always disable for better CNMF convergence and dendrite identification.</td>
</tr>
<tr>
<td><code>spatial_algorithm</code></td>
<td><code>'hals_thresh'</code></td>
<td>Algorithm for spatial extraction</td>
<td>Use default unless alternative extraction methods are needed.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="temporal-parameters"><strong>ðŸ”¹ Temporal Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>deconv_flag</code></td>
<td><code>true</code></td>
<td>Enable deconvolution</td>
<td>Use default if unsure. Enable for better temporal resolution.</td>
</tr>
<tr>
<td><code>deconv_options</code></td>
<td><code>{'type': 'ar1', 'method': 'foopsi', 'smin': -5, 'optimize_pars': True, 'max_tau': 100}</code></td>
<td>Deconvolution settings</td>
<td>Use default parameters to minimize false-positives and computational stability</td>
</tr>
</tbody>
</table>
<h3 id="merging-parameters"><strong>ðŸ”¹ Merging Parameters</strong></h3>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Default Value</th>
<th>Description</th>
<th>How to Choose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>merge_thr_spatial</code></td>
<td><code>[0.8, 0.4, -inf]</code></td>
<td>Merge components with highly correlated spatial shapes (<code>corr=0.8</code>), moderate temporal correlations of calcium activities (<code>corr=0.4</code>), and disregard spikes correlations (<code>corr=-inf</code>).</td>
<td>Increase the spatial correlation threshold when you need stricter merging so only very similar components combine. <span class="twemoji" title="Higher correlation thresholds reduce false merges by requiring components to be more alike."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z"/></svg></span></td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 <a href="License"  target="_blank" rel="noopener">CaliAli</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/CaliAli-PV/CaliAli" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.nature.com/articles/s41467-025-58817-z" target="_blank" rel="noopener" title="www.nature.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zm192 0v128h128L256 0zM112 256h160c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64h160c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64h160c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy", "content.tooltips", "navigation.instant"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike", "warning": true}}</script>
    
    
      <script src="../assets/javascripts/bundle.081f42fc.min.js"></script>
      
    
  </body>
</html>